<!DOCTYPE html>
<html lang="en" class="scroll-smooth bg-[#0a0a0a]">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Worship Team | FUBC</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <script>
        tailwind.config = { theme: { extend: { fontFamily: { sans: ['Outfit', 'sans-serif'] }, colors: { surface: '#121212', accent: '#6366f1' }, animation: { 'equalizer': 'equalizer 1s ease-in-out infinite' }, keyframes: { equalizer: { '0%, 100%': { height: '20%' }, '50%': { height: '100%' } } } } } }
    </script>
</head>
<body class="text-gray-300 antialiased pb-24" x-data="{ lang: 'en', showLibrary: false, searchQuery: '', data: null, async init() { try { this.data = await (await fetch('/data.json')).json(); } catch (e) { console.error('Could not load data'); } }, get filteredSongs() { if (!this.data || this.searchQuery === '') return this.data ? this.data.allSongs : []; const q = this.searchQuery.toLowerCase(); return this.data.allSongs.filter(s => (s.n && s.n.toString().includes(q)) || (s.u && s.u.toLowerCase().includes(q))); } }">
    <div x-show="!data" class="fixed inset-0 bg-[#0a0a0a] flex items-center justify-center z-[100]"><div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-accent"></div></div>
    <div x-show="data" x-cloak>
        <nav class="fixed w-full z-50 bg-[#0a0a0a]/90 backdrop-blur border-b border-white/5"><div class="max-w-6xl mx-auto px-4 h-16 flex justify-between items-center"><div class="font-bold text-xl text-white">FUBC <span class="text-accent font-light">WORSHIP</span></div><button @click="lang = lang === 'en' ? 'ua' : 'en'" class="text-xs font-bold bg-white/10 px-3 py-1 rounded-full text-white"><span :class="{'text-accent': lang==='en'}">EN</span> / <span :class="{'text-accent': lang==='ua'}">UA</span></button></div></nav>
        <main class="pt-24 max-w-6xl mx-auto px-4 space-y-6">
            <div class="rounded-xl bg-[#111] p-6 border border-white/5 flex items-center gap-5"><div class="h-12 w-12 rounded-full bg-white/5 flex items-center justify-center border border-white/10"><div x-show="!data.settings.isRehearsalCanceled" class="flex gap-1 items-end h-5"><span class="w-1 bg-emerald-500 rounded-full animate-equalizer"></span><span class="w-1 bg-emerald-500 rounded-full animate-equalizer" style="animation-delay: 0.2s"></span><span class="w-1 bg-emerald-500 rounded-full animate-equalizer" style="animation-delay: 0.4s"></span></div><svg x-show="data.settings.isRehearsalCanceled" class="h-6 w-6 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg></div><div><h2 class="text-xl font-bold text-white"><span x-show="!data.settings.isRehearsalCanceled">Rehearsal <span class="text-emerald-400">ON</span></span><span x-show="data.settings.isRehearsalCanceled">Rehearsal <span class="text-red-500">CANCELED</span></span></h2><p class="text-sm text-gray-400"><span x-text="data.settings.nextRehearsalDate"></span> • <span x-text="data.settings.nextRehearsalTime"></span></p></div></div>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 space-y-4"><h3 class="text-white font-bold">Setlist</h3><template x-for="song in data.currentSetlist" :key="song.title"><div class="glass-card rounded-xl p-5 relative overflow-hidden group"><div class="flex justify-between items-center relative z-10"><div class="flex items-center gap-4"><div class="h-10 w-10 rounded bg-white/5 flex items-center justify-center text-accent font-bold text-sm" x-text="song.binderNumber"></div><div><h4 class="text-white font-medium" x-text="song.title"></h4><p class="text-gray-500 text-sm" x-text="song.sub"></p></div></div><div class="flex gap-2" x-show="song.link || song.chords"><template x-if="song.link"><a :href="song.link" target="_blank" class="px-3 py-1.5 rounded bg-[#222] border border-white/10 text-xs text-white">Audio</a></template><template x-if="song.chords"><a :href="song.chords" target="_blank" class="px-3 py-1.5 rounded bg-[#222] border border-white/10 text-xs text-white">Chords</a></template></div></div></div></template><button @click="showLibrary = true" class="w-full py-3 rounded-xl border border-dashed border-gray-700 text-gray-500 hover:text-white hover:bg-white/5 transition text-sm">Browse Full Library</button></div>
                <div class="space-y-6"><div class="glass-card rounded-xl p-6"><h3 class="text-white font-bold mb-4">Upcoming</h3><div class="space-y-4"><template x-for="event in data.events"><div class="flex gap-4"><div class="h-10 w-10 rounded bg-white/5 flex flex-col items-center justify-center border border-white/10"><span class="text-[9px] text-gray-400 uppercase font-bold" x-text="event.date.split(' ')[0]"></span><span class="text-xs text-white font-bold" x-text="event.date.split(' ')[1]"></span></div><div><h4 class="text-gray-200 text-sm font-medium" x-text="lang === 'en' ? event.title_en : event.title_ua"></h4><p class="text-gray-500 text-xs" x-text="event.day + ' • ' + event.time"></p></div></div></template></div></div></div>
            </div>
        </main>
        <div x-show="showLibrary" x-transition.opacity class="fixed inset-0 z-[100] flex items-center justify-center p-4" x-cloak><div @click="showLibrary = false" class="absolute inset-0 bg-black/80 backdrop-blur-sm"></div><div class="relative w-full max-w-2xl bg-[#121212] border border-gray-800 rounded-2xl flex flex-col max-h-[85vh]"><div class="p-4 border-b border-gray-800 flex gap-3"><input x-model="searchQuery" type="text" placeholder="Search..." class="bg-transparent text-white w-full focus:outline-none" autofocus></div><div class="overflow-y-auto p-2"><template x-for="song in filteredSongs" :key="song.u"><div class="flex items-center gap-4 p-3 hover:bg-white/5 rounded text-gray-300"><span class="font-mono w-8 text-right text-gray-500" x-text="'#'+song.n"></span><span x-text="song.u"></span></div></template></div></div></div>
    </div>
    <script>if (window.netlifyIdentity) { window.netlifyIdentity.on("init", user => { if (!user) { window.netlifyIdentity.on("login", () => { document.location.href = "/admin/"; }); } }); }</script>
</body>
</html>