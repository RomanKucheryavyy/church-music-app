<!DOCTYPE html>
<html lang="en" class="scroll-smooth bg-[#f8fafc]">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FUBC Band | Official Site</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 
                        sans: ['Inter', 'sans-serif'],
                        heading: ['Montserrat', 'sans-serif']
                    },
                    colors: {
                        pageBg: '#f8fafc',
                        textMain: '#0f172a',
                        textMuted: '#64748b',
                        brass: '#b45309',       
                        brassLight: '#d97706',
                        surface: '#ffffff',
                    },
                    animation: {
                        // Default defined here, but overridden in HTML for mobile speed
                        marquee: 'marquee 30s linear infinite',
                    },
                    keyframes: {
                        marquee: {
                            '0%': { transform: 'translateX(100%)' },
                            '100%': { transform: 'translateX(-100%)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        [x-cloak] { display: none !important; }
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 5px; border: 2px solid #f1f5f9; }
        
        input[type=range] { -webkit-appearance: none; background: transparent; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 24px; width: 24px; border-radius: 50%; background: #b45309; margin-top: -10px; cursor: pointer; border: 2px solid white; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 4px; cursor: pointer; background: #e2e8f0; border-radius: 99px; }
        input[type=range]:focus { outline: none; }
    </style>
</head>

<body class="text-textMain antialiased bg-pageBg"
    x-data="{ 
        lang: 'en', 
        showLibrary: false, 
        searchQuery: '',
        submitStatus: 'idle', 
        verse: null,
        mobileMenuOpen: false,

        // --- DATA FALLBACKS ---
        settings: { isRehearsalCanceled: false, conductorNote: '' },
        events: [], 
        currentSetlist: [],
        allSongs: [],

        verses: [
            { en: 'Make a joyful noise unto the Lord, all the earth: make a loud noise, and rejoice, and sing praise. - Psalm 98:4', ua: 'Викликніть Господу, уся земле, і співайте, і грайте! - Псалми 98:4' },
            { en: 'I will sing to the LORD as long as I live; I will sing praise to my God while I have being. - Psalm 104:33', ua: 'Я буду співати Господеві за життя свого, буду співати Богові моєму, поки я є. - Псалми 104:33' },
            { en: 'Praise him with the sounding of the trumpet, praise him with the harp and lyre. - Psalm 150:3', ua: 'Хваліть Його звуком трубним, хваліть Його на арфі та гуслах! - Псалми 150:3' },
            { en: 'Sing to him a new song; play skillfully, and shout for joy. - Psalm 33:3', ua: 'Співайте Йому нову пісню, грайте добре на гуслах із радісним співом! - Псалми 33:3' }
        ],

        async init() {
            this.verse = this.verses[Math.floor(Math.random() * this.verses.length)];
            try {
                const response = await fetch('/data.json');
                if (response.ok) {
                    const json = await response.json();
                    this.settings = { ...this.settings, ...json.settings };
                    this.events = json.events || [];
                    this.currentSetlist = json.currentSetlist || [];
                    this.allSongs = json.allSongs || [];
                }
            } catch (e) { console.log('Using built-in data'); }
        },

        submitForm() {
            this.submitStatus = 'submitting';
            const formData = new FormData(this.$refs.form);
            fetch('/', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: new URLSearchParams(formData).toString()
            })
            .then(() => {
                this.submitStatus = 'success';
                this.$refs.form.reset();
                setTimeout(() => this.submitStatus = 'idle', 5000);
            })
            .catch(() => {
                alert('Connection error. Please try again.');
                this.submitStatus = 'idle';
            });
        },

        // --- SORTING LOGIC ---
        get sortedSetlist() {
            return [...this.currentSetlist].sort((a, b) => {
                const scoreA = (a.link ? 2 : 0) + (a.chords ? 1 : 0);
                const scoreB = (b.link ? 2 : 0) + (b.chords ? 1 : 0);
                return scoreB - scoreA;
            });
        },

        get nextFriday() {
            const d = new Date();
            if (d.getDay() === 5 && d.getHours() >= 22) { d.setDate(d.getDate() + 1); }
            const daysUntilFriday = (5 - d.getDay() + 7) % 7;
            if (daysUntilFriday > 0 || (daysUntilFriday === 0 && d.getHours() >= 22)) {
                 d.setDate(d.getDate() + (daysUntilFriday === 0 ? 7 : daysUntilFriday));
            }
            return d.toLocaleDateString(this.lang === 'en' ? 'en-US' : 'uk-UA', { month: 'long', day: 'numeric' });
        },

        get availableDates() {
            let dates = [];
            if (!this.settings.isRehearsalCanceled) {
                dates.push({ 
                    val: this.nextFriday + ' (Friday Rehearsal)', 
                    label: this.nextFriday + (this.lang === 'en' ? ' - Friday Rehearsal' : ' - П\'ятнична Репетиція')
                });
            }
            this.events.forEach(e => {
                dates.push({ val: e.date + ' (' + e.title_en + ')', label: e.date + ' - ' + (this.lang === 'en' ? e.title_en : e.title_ua) });
            });
            return dates;
        },

        get filteredSongs() {
            if (this.searchQuery === '') return this.allSongs;
            const q = this.searchQuery.toLowerCase();
            return this.allSongs.filter(s => (s.n && s.n.toString().includes(q)) || (s.u && s.u.toLowerCase().includes(q)));
        }
    }"
>

    <div class="bg-slate-900 text-white py-2.5 overflow-hidden relative z-50 border-b border-brass/20">
        <div class="whitespace-nowrap animate-[marquee_15s_linear_infinite] md:animate-[marquee_30s_linear_infinite] flex gap-20 font-medium tracking-wide text-sm items-center">
            <span>
                <span class="text-brassLight font-bold uppercase tracking-wider">Next Rehearsal:</span> 
                <span x-show="!settings.isRehearsalCanceled"><span x-text="nextFriday"></span> @ 9:00 PM</span>
                <span x-show="settings.isRehearsalCanceled" class="text-red-400 font-bold ml-1" x-text="lang === 'en' ? 'CANCELED' : 'СКАСОВАНО'"></span>
            </span>
            <span class="text-slate-400 italic font-serif text-lg" x-text="lang === 'en' ? verse.en : verse.ua"></span>
            <span><span class="text-brassLight font-bold uppercase tracking-wider">Next Service:</span> Feb 22 @ 9:00 AM</span>
            <span>
                <span class="text-brassLight font-bold uppercase tracking-wider">Next Rehearsal:</span> 
                <span x-show="!settings.isRehearsalCanceled"><span x-text="nextFriday"></span> @ 9:00 PM</span>
                <span x-show="settings.isRehearsalCanceled" class="text-red-400 font-bold ml-1" x-text="lang === 'en' ? 'CANCELED' : 'СКАСОВАНО'"></span>
            </span>
            <span class="text-slate-400 italic font-serif text-lg" x-text="lang === 'en' ? verse.en : verse.ua"></span>
        </div>
    </div>

    <nav class="sticky top-0 z-40 bg-white/95 backdrop-blur-md border-b border-slate-200/80 shadow-sm transition-colors duration-300" :class="mobileMenuOpen ? 'bg-white border-transparent' : ''">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                
                <a href="#" class="flex items-center gap-3 hover:opacity-80 transition-opacity group z-50 relative">
                    
                    <img src="logo.png" alt="FUBC Band Logo" class="h-16 w-auto object-contain mix-blend-multiply">

                    <div class="font-heading font-bold text-xl sm:text-2xl tracking-[0.5em] text-slate-900 leading-none">
                        FUBC 
                        <span class="text-brass block text-[10px] sm:text-xs font-semibold tracking-[0.35em] mt-0.5 group-hover:text-brassLight transition-colors">BAND</span>
                    </div>
                </a>

                <div class="hidden md:flex items-center gap-10">
                    <button @click="lang = lang === 'en' ? 'ua' : 'en'" class="text-xs font-bold text-slate-500 hover:text-slate-900 transition-colors uppercase tracking-widest border border-slate-200 px-4 py-1.5 rounded-full hover:border-brass/50 bg-white">
                        <span :class="lang === 'en' ? 'text-brass font-extrabold' : ''">EN</span> <span class="text-slate-300 px-1">/</span> <span :class="lang === 'ua' ? 'text-brass font-extrabold' : ''">UA</span>
                    </button>
                    <div class="flex items-center gap-8">
                        <a href="#setlist" class="relative group py-2"><span class="font-bold text-xs uppercase tracking-widest text-slate-500 group-hover:text-brass transition-colors" x-text="lang === 'en' ? 'Info' : 'Інфо'"></span><span class="absolute bottom-0 left-0 w-0 h-0.5 bg-brass transition-all duration-300 group-hover:w-full"></span></a>
                        <a href="#tools" class="relative group py-2"><span class="font-bold text-xs uppercase tracking-widest text-slate-500 group-hover:text-brass transition-colors" x-text="lang === 'en' ? 'Tools' : 'Інструменти'"></span><span class="absolute bottom-0 left-0 w-0 h-0.5 bg-brass transition-all duration-300 group-hover:w-full"></span></a>
                        <a href="#media" class="relative group py-2"><span class="font-bold text-xs uppercase tracking-widest text-slate-500 group-hover:text-brass transition-colors" x-text="lang === 'en' ? 'Media' : 'Медіа'"></span><span class="absolute bottom-0 left-0 w-0 h-0.5 bg-brass transition-all duration-300 group-hover:w-full"></span></a>
                    </div>
                </div>

                <button @click="mobileMenuOpen = !mobileMenuOpen" class="md:hidden z-50 p-2 text-slate-800 hover:text-brass transition-colors focus:outline-none" aria-label="Toggle Menu">
                    <svg x-show="!mobileMenuOpen" class="w-7 h-7 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/></svg>
                    <svg x-show="mobileMenuOpen" class="w-7 h-7 transform transition-transform duration-300 rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" x-cloak><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg>
                </button>

            </div>
        </div>

        <div class="fixed top-20 left-0 w-full h-[50vh] z-40 bg-white border-b-4 border-brass shadow-2xl md:hidden flex flex-col px-6 transition-all duration-300 origin-top"
             x-show="mobileMenuOpen"
             x-transition:enter="opacity-0 scale-y-0"
             x-transition:enter-end="opacity-100 scale-y-100"
             x-transition:leave="opacity-100 scale-y-100"
             x-transition:leave-end="opacity-0 scale-y-0"
             x-cloak>
            
            <div class="flex-1 flex flex-col items-center justify-center space-y-6">
                <a href="#setlist" @click="mobileMenuOpen = false" class="group relative"><span class="text-xl font-heading font-bold text-slate-800 group-hover:text-brass transition-colors uppercase tracking-widest" x-text="lang === 'en' ? 'Info' : 'Інфо'"></span><span class="absolute -bottom-2 left-1/2 -translate-x-1/2 w-0 h-0.5 bg-brass transition-all duration-300 group-hover:w-full"></span></a>
                <a href="#tools" @click="mobileMenuOpen = false" class="group relative"><span class="text-xl font-heading font-bold text-slate-800 group-hover:text-brass transition-colors uppercase tracking-widest" x-text="lang === 'en' ? 'Tools' : 'Інструменти'"></span><span class="absolute -bottom-2 left-1/2 -translate-x-1/2 w-0 h-0.5 bg-brass transition-all duration-300 group-hover:w-full"></span></a>
                <a href="#media" @click="mobileMenuOpen = false" class="group relative"><span class="text-xl font-heading font-bold text-slate-800 group-hover:text-brass transition-colors uppercase tracking-widest" x-text="lang === 'en' ? 'Media' : 'Медіа'"></span><span class="absolute -bottom-2 left-1/2 -translate-x-1/2 w-0 h-0.5 bg-brass transition-all duration-300 group-hover:w-full"></span></a>
            </div>

            <div class="mb-6 space-y-4 flex flex-col items-center border-t border-slate-100 pt-4">
                <button @click="document.querySelector('form[name=attendance]').scrollIntoView({behavior: 'smooth'}); mobileMenuOpen = false;" class="text-[10px] font-bold text-brass uppercase tracking-widest hover:underline flex items-center gap-2"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg><span x-text="lang === 'en' ? 'Report Absence' : 'Повідомити про відсутність'"></span></button>
                <button @click="lang = lang === 'en' ? 'ua' : 'en'" class="text-xs font-bold text-slate-500 uppercase tracking-widest border border-slate-200 px-6 py-2 rounded-full active:bg-slate-50 shadow-sm"><span :class="lang === 'en' ? 'text-brass font-extrabold' : ''">EN</span> <span class="text-slate-300 px-2">/</span> <span :class="lang === 'ua' ? 'text-brass font-extrabold' : ''">UA</span></button>
            </div>
        </div>
    </nav>

    <div class="relative w-full h-[500px] sm:h-[600px] bg-slate-900 overflow-hidden">
        <img src="https://images.unsplash.com/photo-1573871669414-010dbf73ca84?q=80&w=2071&auto=format&fit=crop" alt="Brass Instruments" class="absolute inset-0 w-full h-full object-cover opacity-40">
        <div class="absolute inset-0 bg-gradient-to-b from-slate-900/60 via-slate-900/30 to-slate-900"></div>

        <div class="absolute inset-0 flex flex-col items-center justify-center text-center px-4 pt-10 z-10">
            <h1 class="font-heading text-2xl sm:text-4xl md:text-5xl font-bold text-white tracking-tight mb-6 drop-shadow-2xl max-w-4xl mx-auto leading-snug">
                <span x-show="lang === 'en'">“Praise him with trumpet sound; praise him with lute and harp!”<br><span class="text-base sm:text-2xl font-medium mt-4 block text-brassLight tracking-wider">– Psalm 150:3</span></span>
                <span x-show="lang === 'ua'" x-cloak>“Хваліть Його звуком трубним, хваліть Його на арфі та гуслах!”<br><span class="text-base sm:text-2xl font-medium mt-4 block text-brassLight tracking-wider">– Псалми 150:3</span></span>
            </h1>
            <p class="text-slate-300 text-sm sm:text-lg max-w-2xl font-light tracking-wide uppercase">
                <span x-show="lang === 'en'">First Ukrainian Baptist Church Band Ministry</span>
                <span x-show="lang === 'ua'" x-cloak>Оркестр Першої Української Баптистської Церкви</span>
            </p>
        </div>

        <div class="absolute bottom-0 left-0 w-full overflow-hidden leading-[0] z-20">
            <svg class="relative block w-full h-[60px] sm:h-[100px]" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
                <path d="M985.66,92.83C906.67,72,823.78,31,743.84,14.19c-82.26-17.34-168.06-16.33-250.45.39-57.84,11.73-114,31.07-172,41.86A600.21,600.21,0,0,1,0,27.35V120H1200V95.8C1132.19,118.92,1055.71,111.31,985.66,92.83Z" class="fill-[#f8fafc]"></path>
            </svg>
        </div>
    </div>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-8 relative z-10 pb-24 space-y-12">

        <div x-show="settings.conductorNote" x-cloak class="bg-white border-l-4 border-brass p-6 rounded-lg shadow-lg relative z-20">
            <div class="flex items-start">
                <div class="flex-shrink-0 pt-1"><svg class="h-6 w-6 text-brass" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5.85 3.5a.75.75 0 0 0-1.117-1 9.719 9.719 0 0 0-2.348 4.876.75.75 0 0 0 1.479.248A8.219 8.219 0 0 1 5.85 3.5ZM19.267 2.5a.75.75 0 1 0-1.118 1 8.22 8.22 0 0 1 2.06 4.124.75.75 0 0 0 1.48-.248A9.72 9.72 0 0 0 19.266 2.5Z" /><path fill-rule="evenodd" d="M12 2.25A6.75 6.75 0 0 0 5.25 9v.75a8.217 8.217 0 0 1-2.119 5.52.75.75 0 0 0 .298 1.206c1.544.57 3.16.99 4.831 1.243a3.75 3.75 0 1 0 7.48 0 24.583 24.583 0 0 0 4.83-1.244.75.75 0 0 0 .298-1.205 8.217 8.217 0 0 1-2.118-5.52V9A6.75 6.75 0 0 0 12 2.25ZM9.75 18c0-.034 0-.067.002-.1a25.05 25.05 0 0 0 4.496 0l.002.1a2.25 2.25 0 1 1-4.5 0Z" clip-rule="evenodd" /></svg></div>
                <div class="ml-4">
                    <h3 class="text-sm font-bold text-slate-900 uppercase tracking-widest mb-2"><span x-show="lang === 'en'">Note from Conductor</span><span x-show="lang === 'ua'" x-cloak>Повідомлення від Диригента</span></h3>
                    <div class="text-slate-700 font-medium leading-relaxed" x-text="settings.conductorNote"></div>
                </div>
            </div>
        </div>

        <section id="setlist" class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden scroll-mt-32">
            <div class="px-6 py-8 border-b border-slate-100 flex flex-col sm:flex-row justify-between items-start sm:items-end gap-4">
                <div><h2 class="font-heading text-2xl font-bold text-slate-900"><span x-show="lang === 'en'">Performance Setlist</span><span x-show="lang === 'ua'" x-cloak>Програма Виступу</span></h2><p class="text-textMuted text-sm mt-1 font-medium"><span x-show="lang === 'en'">Upcoming Service Material</span><span x-show="lang === 'ua'" x-cloak>Матеріал найближчого служіння</span></p></div>
                <button @click="showLibrary = true" class="text-sm font-semibold text-brass hover:text-brassLight transition-colors flex items-center gap-2 group"><span x-show="lang === 'en'">View Full Library</span><span x-show="lang === 'ua'" x-cloak>Відкрити Архів</span><span class="group-hover:translate-x-1 transition-transform">&rarr;</span></button>
            </div>
            <div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-6 bg-slate-50/50">
                <template x-for="song in sortedSetlist" :key="song.title">
                    <div class="bg-white rounded-xl border border-slate-200 p-5 shadow-sm hover:shadow-md transition-all group relative overflow-hidden">
                        <div class="absolute left-0 top-0 bottom-0 w-1 bg-brass opacity-0 group-hover:opacity-100 transition-opacity"></div>
                        <div class="flex justify-between items-start mb-6"><div><h3 class="font-heading text-lg font-bold text-slate-900 group-hover:text-brass transition-colors" x-text="song.title"></h3><p class="text-slate-500 text-sm mt-1" x-text="song.sub"></p></div><span class="px-3 py-1 rounded-md bg-slate-100 text-xs font-bold text-slate-600 border border-slate-200" x-text="song.binderNumber && song.binderNumber !== 'New' ? '#' + song.binderNumber : 'New'"></span></div>
                        <div class="flex gap-3" x-show="song.link || song.chords"><template x-if="song.link"><a :href="song.link" target="_blank" class="flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg bg-slate-900 hover:bg-brass text-white text-sm font-bold transition-all shadow-md"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg><span x-show="lang === 'en'">Listen</span><span x-show="lang === 'ua'" x-cloak>Слухати</span></a></template><template x-if="song.chords"><a :href="song.chords" target="_blank" class="flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg bg-white hover:bg-slate-50 border border-slate-200 text-slate-900 text-sm font-bold transition-all"><svg class="w-4 h-4 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg><span x-show="lang === 'en'">Notes</span><span x-show="lang === 'ua'" x-cloak>Ноти</span></a></template></div>
                    </div>
                </template>
            </div>
        </section>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <section class="lg:col-span-2 bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                <div class="px-6 py-6 border-b border-slate-100"><h2 class="font-heading text-xl font-bold text-slate-900"><span x-show="lang === 'en'">Schedule</span><span x-show="lang === 'ua'" x-cloak>Розклад</span></h2></div>
                <div class="p-6 space-y-4">
                    <div class="flex items-center gap-5 p-4 rounded-xl border border-slate-100 bg-slate-50">
                        <div class="h-14 w-16 min-w-[4rem] rounded-lg bg-white flex flex-col items-center justify-center text-center border border-slate-200 shadow-sm"><span class="text-[9px] text-brass font-bold uppercase tracking-tight" x-text="nextFriday.split(' ')[0]"></span><span class="text-lg text-slate-900 font-extrabold leading-none" x-text="nextFriday.split(' ')[1]"></span></div>
                        <div><h3 class="font-bold text-slate-900"><span x-show="lang === 'en'">Weekly Rehearsal</span><span x-show="lang === 'ua'" x-cloak>Щотижнева Репетиція</span></h3><p class="text-slate-500 text-sm">Friday • 9:00 PM</p><span x-show="settings.isRehearsalCanceled" class="inline-block mt-1 px-2 py-0.5 bg-red-100 text-red-600 text-[10px] font-bold uppercase rounded">Canceled</span></div>
                    </div>
                    <template x-for="event in events"><div class="flex items-center gap-5 p-4 rounded-xl border border-slate-100 bg-white"><div class="h-14 w-16 min-w-[4rem] rounded-lg bg-slate-50 flex flex-col items-center justify-center text-center border border-slate-200"><span class="text-[9px] text-slate-400 font-bold uppercase tracking-tight" x-text="event.date.split(' ')[0]"></span><span class="text-lg text-slate-700 font-extrabold leading-none" x-text="event.date.split(' ')[1]"></span></div><div><h3 class="font-bold text-slate-900" x-text="lang === 'en' ? event.title_en : event.title_ua"></h3><p class="text-slate-500 text-sm" x-text="event.day + ' • ' + event.time"></p></div></div></template>
                </div>
            </section>

            <section class="bg-slate-900 rounded-2xl shadow-lg border border-slate-800 overflow-hidden relative">
                <div class="absolute top-0 right-0 p-32 bg-brass/10 blur-3xl rounded-full pointer-events-none"></div>
                <div x-show="submitStatus === 'success'" class="absolute inset-0 z-20 bg-emerald-600 flex flex-col items-center justify-center text-center p-6" x-transition><svg class="w-12 h-12 text-white mb-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg><h3 class="text-xl font-bold text-white"><span x-show="lang === 'en'">Sent!</span><span x-show="lang === 'ua'" x-cloak>Надіслано!</span></h3></div>
                <div class="p-6 relative z-10">
                    <h3 class="font-heading text-lg font-bold text-white mb-1"><span x-show="lang === 'en'">Report Absence</span><span x-show="lang === 'ua'" x-cloak>Повідомити про відсутність</span></h3>
                    <p class="text-slate-400 text-sm mb-6"><span x-show="lang === 'en'">Let us know if you cannot attend.</span><span x-show="lang === 'ua'" x-cloak>Дайте знати, якщо вас не буде.</span></p>
                    <form x-ref="form" @submit.prevent="submitForm" name="attendance" method="POST" data-netlify="true" class="space-y-4"><input type="hidden" name="form-name" value="attendance" /><input type="text" name="name" required :placeholder="lang === 'en' ? 'Your Name' : 'Ваше Ім\'я'" class="w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-sm text-white placeholder-slate-500 focus:outline-none focus:border-brass transition-colors"><select name="date" required class="w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-sm text-white focus:outline-none focus:border-brass appearance-none"><option value="" disabled selected x-text="lang === 'en' ? 'Select Date' : 'Оберіть Дату'"></option><template x-for="opt in availableDates"><option :value="opt.val" x-text="opt.label"></option></template></select><button type="submit" class="w-full bg-brass hover:bg-brassLight text-white font-bold text-sm py-3 rounded-lg transition-colors shadow-lg disabled:opacity-50" :disabled="submitStatus === 'submitting'"><span x-show="submitStatus === 'idle'"><span x-show="lang === 'en'">Submit</span><span x-show="lang === 'ua'" x-cloak>Надіслати</span></span><span x-show="submitStatus === 'submitting'">...</span></button></form>
                </div>
            </section>
        </div>

        <section id="tools" class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden scroll-mt-32">
            <div class="px-6 py-6 border-b border-slate-100"><h2 class="font-heading text-xl font-bold text-slate-900 flex items-center gap-2"><svg class="w-5 h-5 text-brass" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg><span x-show="lang === 'en'">Musician Toolkit</span><span x-show="lang === 'ua'" x-cloak>Інструменти</span></h2></div>
            <div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-8">
                <div x-data="{ bpm: 100, isPlaying: false, timer: null, audioCtx: null, playClick() { if (!this.audioCtx) this.audioCtx = new (window.AudioContext || window.webkitAudioContext)(); const osc = this.audioCtx.createOscillator(); const gain = this.audioCtx.createGain(); osc.connect(gain); gain.connect(this.audioCtx.destination); osc.frequency.value = 1000; gain.gain.value = 1; osc.start(); gain.gain.exponentialRampToValueAtTime(0.001, this.audioCtx.currentTime + 0.1); osc.stop(this.audioCtx.currentTime + 0.1); }, toggle() { if (this.isPlaying) { clearInterval(this.timer); this.isPlaying = false; } else { this.isPlaying = true; this.playClick(); this.timer = setInterval(() => this.playClick(), (60 / this.bpm) * 1000); } }, updateSpeed() { if (this.isPlaying) { clearInterval(this.timer); this.timer = setInterval(() => this.playClick(), (60 / this.bpm) * 1000); } } }">
                    <div class="flex justify-between items-center mb-6"><span class="text-sm font-bold text-slate-500 uppercase tracking-wider"><span x-show="lang === 'en'">Metronome</span><span x-show="lang === 'ua'" x-cloak>Метроном</span></span><div class="flex items-center gap-2 bg-slate-100 px-3 py-1 rounded-full"><div class="h-2 w-2 rounded-full bg-slate-400" :class="isPlaying ? 'bg-red-500 animate-pulse' : ''"></div><span class="text-lg font-mono font-bold text-slate-900" x-text="bpm"></span><span class="text-[10px] text-slate-500 font-bold">BPM</span></div></div>
                    <input type="range" min="40" max="200" x-model="bpm" @input="updateSpeed()" class="w-full mb-6">
                    <button @click="toggle()" class="w-full py-4 rounded-xl font-bold transition-all text-sm uppercase tracking-wide shadow-sm hover:shadow-md border" :class="isPlaying ? 'bg-white border-slate-200 text-slate-900' : 'bg-slate-900 border-transparent text-white hover:bg-slate-800'"><span x-text="isPlaying ? (lang === 'en' ? 'Stop' : 'Стоп') : (lang === 'en' ? 'Start' : 'Старт')"></span></button>
                </div>
                <div x-data="{ activeNote: null, audioCtx: null, oscillator: null, playNote(freq, noteName) { if (!this.audioCtx) this.audioCtx = new (window.AudioContext || window.webkitAudioContext)(); if (this.activeNote === noteName) { this.oscillator.stop(); this.activeNote = null; return; } if (this.oscillator) { this.oscillator.stop(); } this.oscillator = this.audioCtx.createOscillator(); const gain = this.audioCtx.createGain(); this.oscillator.type = 'triangle'; this.oscillator.frequency.setValueAtTime(freq, this.audioCtx.currentTime); this.oscillator.connect(gain); gain.connect(this.audioCtx.destination); this.oscillator.start(); this.activeNote = noteName; } }">
                    <div class="flex justify-between items-center mb-6"><span class="text-sm font-bold text-slate-500 uppercase tracking-wider"><span x-show="lang === 'en'">Tuning</span><span x-show="lang === 'ua'" x-cloak>Налаштування</span></span><span class="text-xs font-bold text-brass" x-text="activeNote ? (lang === 'en' ? 'Playing: ' : 'Грає: ') + activeNote : ''"></span></div>
                    <div class="grid grid-cols-3 gap-4">
                        <button @click="playNote(233.08, 'Low Bb')" class="py-4 rounded-xl border font-bold text-sm transition-all flex flex-col items-center gap-1" :class="activeNote === 'Low Bb' ? 'bg-brass text-white border-brass' : 'bg-slate-50 text-slate-600 border-slate-200 hover:border-brass'"><span>Low Bb</span><span class="text-[9px] opacity-60 font-mono">233.08Hz</span></button>
                        <button @click="playNote(466.16, 'Concert Bb')" class="py-4 rounded-xl border font-bold text-sm transition-all flex flex-col items-center gap-1" :class="activeNote === 'Concert Bb' ? 'bg-brass text-white border-brass' : 'bg-slate-50 text-slate-600 border-slate-200 hover:border-brass'"><span>Mid Bb</span><span class="text-[9px] opacity-60 font-mono">466.16Hz</span></button>
                        <button @click="playNote(440.00, 'Concert A')" class="py-4 rounded-xl border font-bold text-sm transition-all flex flex-col items-center gap-1" :class="activeNote === 'Concert A' ? 'bg-brass text-white border-brass' : 'bg-slate-50 text-slate-600 border-slate-200 hover:border-brass'"><span>A</span><span class="text-[9px] opacity-60 font-mono">440Hz</span></button>
                    </div>
                </div>
            </div>
        </section>

        <section class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
            <div class="px-6 py-6 border-b border-slate-100 flex justify-between items-center"><h2 class="font-heading text-xl font-bold text-slate-900"><span x-show="lang === 'en'">Media Gallery</span><span x-show="lang === 'ua'" x-cloak>Медіа Галерея</span></h2><a href="https://youtube.com/playlist?list=PLqmdWSP7QrZ5hK9MdbSxGiC9NlsI3vL7f&si=70N759E8fiG6dxQu" target="_blank" class="flex items-center gap-2 bg-[#FF0000] text-white px-4 py-2 rounded-full text-xs font-bold shadow hover:bg-red-700 transition-colors"><svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/></svg><span x-show="lang === 'en'">Playlist</span><span x-show="lang === 'ua'" x-cloak>Плейлист</span></a></div>
            <div class="p-2 bg-slate-50"><div class="relative w-full aspect-video rounded-xl overflow-hidden shadow-inner border border-slate-200"><iframe class="absolute top-0 left-0 w-full h-full" src="https://www.youtube.com/embed/videoseries?si=JI14AJhU9wiD4Svw&amp;list=PLqmdWSP7QrZ5hK9MdbSxGiC9NlsI3vL7f" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe></div></div>
        </section>
    </main>

    <footer class="bg-white border-t border-slate-200 py-12 text-center mt-12">
        <div class="max-w-7xl mx-auto px-4 space-y-4">
            <div class="font-bold text-slate-900 tracking-tight text-xl">FUBC <span class="text-brass">BAND</span></div>
            <div class="flex flex-col sm:flex-row justify-center items-center gap-4 sm:gap-8 text-sm font-semibold text-slate-500">
                <a href="https://www.fubcseattle.com" target="_blank" class="hover:text-brass transition-colors">www.fubcseattle.com</a>
                <span class="hidden sm:inline text-slate-300">|</span>
                <a href="mailto:fubcband@gmail.com" class="hover:text-brass transition-colors">fubcband@gmail.com</a>
            </div>
            <div class="pt-6 border-t border-slate-100 flex flex-col gap-2">
                <p class="text-xs text-slate-400">Designed and built by Roman Kucheryavyy</p>
                <a href="/privacy.html" class="text-xs text-slate-400 hover:text-brass transition-colors underline">Privacy Policy</a>
            </div>
        </div>
    </footer>

    <div x-show="showLibrary" x-transition.opacity class="fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6" x-cloak>
        <div @click="showLibrary = false" class="absolute inset-0 bg-slate-900/60 backdrop-blur-sm"></div>
        <div class="relative w-full max-w-3xl bg-white rounded-xl shadow-2xl flex flex-col max-h-[80vh] overflow-hidden">
            <div class="p-5 border-b border-slate-100 flex items-center justify-between bg-slate-50"><h3 class="font-heading text-lg font-bold text-slate-900"><span x-show="lang === 'en'">Song Library</span><span x-show="lang === 'ua'" x-cloak>Архів Пісень</span></h3><button @click="showLibrary = false" class="p-2 bg-white hover:bg-slate-100 rounded-full text-slate-400 hover:text-slate-900 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg></button></div>
            <div class="p-4 border-b border-slate-100"><input x-model="searchQuery" type="text" :placeholder="lang === 'en' ? 'Search songs...' : 'Пошук...'" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-3 text-slate-900 focus:outline-none focus:border-brass transition-colors"></div>
            <div class="overflow-y-auto p-2 flex-grow bg-white"><template x-for="song in filteredSongs" :key="song.u + song.n"><div class="flex items-center gap-4 p-3 hover:bg-slate-50 rounded-lg transition-colors border-b border-slate-50 last:border-0"><span class="font-mono text-sm font-bold text-brass w-12 text-right" x-text="song.n && song.n !== 'New' ? '#' + song.n : ''"></span><span class="text-slate-700 font-medium" x-text="song.u"></span><span x-show="!song.n || song.n === 'New'" class="ml-auto text-xs font-bold text-slate-400 bg-slate-100 px-2 py-1 rounded">New</span></div></template></div>
        </div>
    </div>
    <script>if (window.netlifyIdentity) { window.netlifyIdentity.on("init", user => { if (!user) { window.netlifyIdentity.on("login", () => { document.location.href = "/admin/"; }); } }); }</script>
</body>
</html>
